!function(){"use strict";class e{constructor(e,t,s){this._title=e.title,this._image=e.url,this._cardSelector=t,this._handleCardClick=s}_getTemplate(){return document.querySelector("#elements-template").content.querySelector(".elements__photo").cloneNode(!0)}generateCard(){this._element=this._getTemplate();const e=this._element.querySelector(".elements__pic");return e.src=this._image,e.alt=this._title,this._element.querySelector(".elements__info-text").textContent=this._title,this._setEventListeners(),this._element}_setEventListeners(){this._element.querySelector(".elements__info-button").addEventListener("click",(e=>{e.target.classList.toggle("elements__info-button_active")})),this._element.querySelector(".elements__delete").addEventListener("click",(()=>{this._element.remove()})),this._element.querySelector(".elements__pic").addEventListener("click",(()=>{this._handleCardClick({title:this._title,url:this._image})}))}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formSelector=e.formSelector,this._element=document.querySelector(t),this._inputList=[...this._element.querySelectorAll(this._inputSelector)],this._button=this._element.querySelector(this._submitButtonSelector)}_hasInvalidInput(e){return!e.validity.valid}_showInputError(e){const t=document.querySelector("#".concat(e.id,"-error"));t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=document.querySelector("#".concat(e.id,"-error"));t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass),t.textContent=""}_validateFormField(e){this._hasInvalidInput(e)?this._showInputError(e):this._hideInputError(e)}_toggleButtonState(e,t){t.disabled=e.some(this._hasInvalidInput)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._validateFormField(e),this._toggleButtonState(this._inputList,this._button)}))}))}resetValidation(){this._element.reset(),this._toggleButtonState(this._inputList,this._button)}enableValidation(){this._element.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e,t){var s,n;n=e=>{"Escape"===e.key&&this.close()},(s="_handleEscClose")in this?Object.defineProperty(this,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[s]=n,this._popupSelector=document.querySelector(e),this._buttonSelector=this._popupSelector.querySelector(".popup__close")}open(){this._popupSelector.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupSelector.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){document.addEventListener("mousedown",(e=>{e.target.classList.contains("popup_open")&&this.close()})),this._buttonSelector.addEventListener("click",(e=>{e.preventDefault(),this.close()}))}}class n extends s{constructor(e,t){let{handleSubmit:s}=t;super(e),this._handleSubmit=s,this._popupWithForm=this._popupSelector.querySelector(".popup__form")}_getInputValues(){const e=this._popupWithForm.querySelectorAll(".popup__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupWithForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this.close()}))}}const r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input-error",errorClass:"popup__error_active"},o="#add-popup",i=".popup_type-edit_profile",l=document.querySelector(".popup__input_type_name"),u=document.querySelector(".popup__input_type_description"),c=document.querySelector("#title"),a=document.querySelector("#url"),p=(document.querySelectorAll(".popup__close"),document.querySelector(".profile__edit")),_=document.querySelector(".profile__plus"),d=new s(o);d.setEventListeners(),_.addEventListener("click",(()=>{f.resetValidation(),d.open()}));const h=new s(i);function m(t,s){const n=new e(t,"#elements-template",y).generateCard();s.addItem(n)}h.setEventListeners(),new n(o,{handleSubmit:()=>{m({url:a.value,title:c.value},E)}}).setEventListeners(),new n(i,{handleSubmit:e=>{S.setUserInfo(e)}}).setEventListeners();const S=new class{constructor(e){let{profileName:t,profileText:s}=e;this._userNameElement=document.querySelector(t),this._userJobElement=document.querySelector(s)}getUserInfo(){return{userName:this._userNameElement.textContent,userDescription:this._userJobElement.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._userNameElement.textContent=t,this._userJobElement.textContent=s}}({profileName:".profile__name",profileText:".profile__text"});p.addEventListener("click",(()=>{const e=S.getUserInfo();l.value=e.userName,u.value=e.userDescription,h.open()}));const v=new class extends s{constructor(e){super(e),this._image=this._popupSelector.querySelector(".popup__image"),this._caption=this._popupSelector.querySelector(".popup__caption")}open(e){this._image.src=e.url,this._image.alt=e.title,this._caption.textContent=e.title,super.open()}}("#photo"),E=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._containerElement=document.querySelector(t)}renderer(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerElement.prepend(e)}}({items:[{title:"Yosemite Valley",url:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{title:"Lake Louise",url:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Lago di Braies",url:"https://code.s3.yandex.net/web-code/lago.jpg"},{title:"Latemar",url:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",url:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Rio de Janeiro",url:"https://images.unsplash.com/photo-1544989164-31dc3c645987?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=735&q=80"}],renderer:e=>{m(e,E)}},".elements");function y(e){v.open(e)}E.renderer(),v.setEventListeners();const f=new t(r,"#add-form");new t(r,"#profile-form").enableValidation(),f.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FDQ0YsTUFBTyxVQUNQRSxJQUFLLG1EQUVOLENBQ0NGLE1BQU8sd0JBQ1BFLElBQUssbURBRU4sQ0FDQ0YsTUFBTyxpQkFDUEUsSUFBSywrSkMyQ0xvSCxTQUFXcEIsSUFDVkQsRUFBV0MsRUFBTUksS0RyRVEsYUM2RTVCLFNBQVN6RyxFQUFnQkYsR0FDeEJ1SCxFQUFXN0MsS0FBSzFFLEdBSmpCMkcsRUFBY2dCLFdBQ2RKLEVBQVcxQyxvQkFNWCxNQUdNdUIsRUFBbUIsSUFBSXhFLEVBQWM4RCxFQUhuQixhQUlLLElBQUk5RCxFQUNoQzhELEVBSjhCLGlCQVFWMUIsbUJBRXJCb0MsRUFBaUJwQyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9mb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9wb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvcG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy91c2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvcG9wVXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xyXG5cdGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcblx0XHR0aGlzLl90aXRsZSA9IGRhdGEudGl0bGU7XHJcblx0XHR0aGlzLl9pbWFnZSA9IGRhdGEudXJsO1xyXG5cdFx0dGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG5cdFx0dGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG5cdH1cclxuXHJcblx0X2dldFRlbXBsYXRlKCkge1xyXG5cdFx0Y29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG5cdFx0XHQucXVlcnlTZWxlY3RvcihcIiNlbGVtZW50cy10ZW1wbGF0ZVwiKVxyXG5cdFx0XHQuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19waG90b1wiKVxyXG5cdFx0XHQuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuXHRcdHJldHVybiBjYXJkRWxlbWVudDtcclxuXHR9XHJcblxyXG5cdGdlbmVyYXRlQ2FyZCgpIHtcclxuXHRcdHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cdFx0Y29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19waWNcIik7XHJcblx0XHRpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5faW1hZ2U7XHJcblx0XHRpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fdGl0bGU7XHJcblx0XHR0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2luZm8tdGV4dFwiKS50ZXh0Q29udGVudCA9XHJcblx0XHRcdHRoaXMuX3RpdGxlO1xyXG5cclxuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcblx0fVxyXG5cdF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMuX2VsZW1lbnRcclxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2luZm8tYnV0dG9uXCIpXHJcblx0XHRcdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG5cdFx0XHRcdGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRzX19pbmZvLWJ1dHRvbl9hY3RpdmVcIik7XHJcblx0XHRcdH0pO1xyXG5cdFx0dGhpcy5fZWxlbWVudFxyXG5cdFx0XHQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fZGVsZXRlXCIpXHJcblx0XHRcdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0dGhpcy5fZWxlbWVudFxyXG5cdFx0XHQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGljXCIpXHJcblx0XHRcdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuX2hhbmRsZUNhcmRDbGljayh7XHJcblx0XHRcdFx0XHR0aXRsZTogdGhpcy5fdGl0bGUsXHJcblx0XHRcdFx0XHR1cmw6IHRoaXMuX2ltYWdlLFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtU2VsZWN0b3IpIHtcclxuXHRcdHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG5cdFx0dGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuXHRcdHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG5cdFx0dGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG5cdFx0dGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblx0XHR0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcblx0XHR0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcblx0XHR0aGlzLl9idXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cdH1cclxuXHJcblx0X2hhc0ludmFsaWRJbnB1dChpbnB1dEVsKSB7XHJcblx0XHRyZXR1cm4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQ7XHJcblx0fVxyXG5cclxuXHRfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG5cdFx0Y29uc3QgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuXHRcdGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG5cdFx0aW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcblx0XHRlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG5cdH1cclxuXHJcblx0X2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuXHRcdGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcblx0XHRlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuXHRcdGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG5cdFx0ZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuXHR9XHJcblxyXG5cdF92YWxpZGF0ZUZvcm1GaWVsZChpbnB1dEVsKSB7XHJcblx0XHRpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0RWwpKSB7XHJcblx0XHRcdHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b24pIHtcclxuXHRcdGJ1dHRvbi5kaXNhYmxlZCA9IGlucHV0TGlzdC5zb21lKHRoaXMuX2hhc0ludmFsaWRJbnB1dCk7XHJcblx0fVxyXG5cclxuXHRfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG5cdFx0XHRpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5fdmFsaWRhdGVGb3JtRmllbGQoaW5wdXRFbCk7XHJcblx0XHRcdFx0dGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b24pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXNldFZhbGlkYXRpb24oKSB7XHJcblx0XHR0aGlzLl9lbGVtZW50LnJlc2V0KCk7XHJcblx0XHR0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbik7XHJcblx0fVxyXG5cclxuXHRlbmFibGVWYWxpZGF0aW9uKCkge1xyXG5cdFx0dGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuXHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgYnV0dG9uU2VsZWN0b3IpIHtcclxuXHRcdHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy5fYnV0dG9uU2VsZWN0b3IgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xyXG5cdH1cclxuXHRvcGVuKCkge1xyXG5cdFx0dGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcclxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuXHR9XHJcblx0Y2xvc2UoKSB7XHJcblx0XHR0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xyXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG5cdH1cclxuXHRfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG5cdFx0aWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0aWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuXCIpKSB7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9idXR0b25TZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9wb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBoYW5kbGVTdWJtaXQgfSkge1xyXG5cdFx0c3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblx0XHR0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcblx0XHR0aGlzLl9wb3B1cFdpdGhGb3JtID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cdH1cclxuXHRfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcblx0XHRjb25zdCBpbnB1dExpc3QgPSB0aGlzLl9wb3B1cFdpdGhGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG5cdFx0Y29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHRcdGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG5cdFx0XHRpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gaW5wdXRWYWx1ZXM7XHJcblx0fVxyXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0c3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuX3BvcHVwV2l0aEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBmb3JtU2V0dGluZ3MgPSB7XHJcblx0Zm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG5cdGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG5cdHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0XCIsXHJcblx0aW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcblx0aW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvclwiLFxyXG5cdGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBcIi5wcm9maWxlX19uYW1lXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGV4dCA9IFwiLnByb2ZpbGVfX3RleHRcIjtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IFwiI2FkZC1wb3B1cFwiO1xyXG5leHBvcnQgY29uc3QgcGhvdG9HYWxsZXJ5ID0gXCIuZWxlbWVudHNcIjtcclxuZXhwb3J0IGNvbnN0IGltYWdlTW9kYWwgPSBcIiNwaG90b1wiO1xyXG5leHBvcnQgY29uc3QgcGhvdG9BcnJheSA9IFtcclxuXHR7XHJcblx0XHR0aXRsZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuXHRcdHVybDogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuXHR9LFxyXG5cdHtcclxuXHRcdHRpdGxlOiBcIkxha2UgTG91aXNlXCIsXHJcblx0XHR1cmw6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcblx0fSxcclxuXHR7XHJcblx0XHR0aXRsZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG5cdFx0dXJsOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcblx0fSxcclxuXHR7XHJcblx0XHR0aXRsZTogXCJMYXRlbWFyXCIsXHJcblx0XHR1cmw6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuXHR9LFxyXG5cdHtcclxuXHRcdHRpdGxlOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG5cdFx0dXJsOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcblx0fSxcclxuXHR7XHJcblx0XHR0aXRsZTogXCJSaW8gZGUgSmFuZWlyb1wiLFxyXG5cdFx0dXJsOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQ0OTg5MTY0LTMxZGMzYzY0NTk4Nz9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzM1JnE9ODBcIixcclxuXHR9LFxyXG5dO1xyXG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL2Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL3NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL3BvcFVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuXHRmb3JtU2V0dGluZ3MsXHJcblx0cGhvdG9BcnJheSxcclxuXHRwcm9maWxlTmFtZSxcclxuXHRwcm9maWxlVGV4dCxcclxuXHRhZGRDYXJkTW9kYWwsXHJcblx0cGhvdG9HYWxsZXJ5LFxyXG5cdGltYWdlTW9kYWwsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGUgPSBcIi5wb3B1cF90eXBlLWVkaXRfcHJvZmlsZVwiO1xyXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgaW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5cclxuY29uc3QgYWRkSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKTtcclxuY29uc3QgYWRkSW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdXJsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNsb3NlTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19jbG9zZVwiKTtcclxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcclxuY29uc3QgYnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wbHVzXCIpO1xyXG5cclxuY29uc3QgbmV3UG9wdXBQaG90byA9IG5ldyBQb3B1cChhZGRDYXJkTW9kYWwpO1xyXG5uZXdQb3B1cFBob3RvLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG5cdG5ld1BvcHVwUGhvdG8ub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cChlZGl0UHJvZmlsZSk7XHJcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShhZGRDYXJkTW9kYWwsIHtcclxuXHRoYW5kbGVTdWJtaXQ6ICgpID0+IHtcclxuXHRcdHJlbmRlckNhcmQoXHJcblx0XHRcdHsgdXJsOiBhZGRJbnB1dERlc2NyaXB0aW9uLnZhbHVlLCB0aXRsZTogYWRkSW5wdXROYW1lLnZhbHVlIH0sXHJcblx0XHRcdHBob3Rvc1NlY3Rpb25cclxuXHRcdCk7XHJcblx0fSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0sIGNvbnRhaW5lcikge1xyXG5cdGNvbnN0IGVsZW1lbnQgPSBuZXcgQ2FyZChpdGVtLCBcIiNlbGVtZW50cy10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG5cdGNvbnN0IG5ld0NhcmQgPSBlbGVtZW50LmdlbmVyYXRlQ2FyZCgpO1xyXG5cdGNvbnRhaW5lci5hZGRJdGVtKG5ld0NhcmQpO1xyXG59XHJcblxyXG5hZGRDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdFByb2ZpbGUsIHtcclxuXHRoYW5kbGVTdWJtaXQ6IChkYXRhKSA9PiB7XHJcblx0XHR1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxuXHR9LFxyXG59KTtcclxuXHJcbmVkaXRQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IHByb2ZpbGVOYW1lLCBwcm9maWxlVGV4dCB9KTtcclxuXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cdGlucHV0TmFtZS52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby51c2VyTmFtZTtcclxuXHRpbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gY3VycmVudFVzZXJJbmZvLnVzZXJEZXNjcmlwdGlvbjtcclxuXHRwb3B1cFByb2ZpbGUub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VNb2RhbCk7XHJcbmNvbnN0IHBob3Rvc1NlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuXHR7XHJcblx0XHRpdGVtczogcGhvdG9BcnJheSxcclxuXHRcdHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG5cdFx0XHRyZW5kZXJDYXJkKGl0ZW0sIHBob3Rvc1NlY3Rpb24pO1xyXG5cdFx0fSxcclxuXHR9LFxyXG5cdHBob3RvR2FsbGVyeVxyXG4pO1xyXG5waG90b3NTZWN0aW9uLnJlbmRlcmVyKCk7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhkYXRhKSB7XHJcblx0aW1hZ2VQb3B1cC5vcGVuKGRhdGEpO1xyXG59XHJcblxyXG5jb25zdCBhZGRGb3JtU2VsZWN0b3IgPSBcIiNhZGQtZm9ybVwiO1xyXG5jb25zdCBhZGRQcm9maWxlRm9ybVNlbGVjdG9yID0gXCIjcHJvZmlsZS1mb3JtXCI7XHJcblxyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBhZGRGb3JtU2VsZWN0b3IpO1xyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG5cdGZvcm1TZXR0aW5ncyxcclxuXHRhZGRQcm9maWxlRm9ybVNlbGVjdG9yXHJcbik7XHJcblxyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuXHRjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lLCBwcm9maWxlVGV4dCB9KSB7XHJcblx0XHR0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lKTtcclxuXHRcdHRoaXMuX3VzZXJKb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlVGV4dCk7XHJcblx0fVxyXG5cdGdldFVzZXJJbmZvKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0dXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuXHRcdFx0dXNlckRlc2NyaXB0aW9uOiB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuXHRcdH07XHJcblx0fVxyXG5cdHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG5cdFx0dGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuXHRcdHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vcG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuXHRjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcblx0XHRzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHRcdHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuXHRcdHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XHJcblx0fVxyXG5cdG9wZW4oZGF0YSkge1xyXG5cdFx0dGhpcy5faW1hZ2Uuc3JjID0gZGF0YS51cmw7XHJcblx0XHR0aGlzLl9pbWFnZS5hbHQgPSBkYXRhLnRpdGxlO1xyXG5cdFx0dGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEudGl0bGU7XHJcblx0XHRzdXBlci5vcGVuKCk7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuXHRjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG5cdFx0dGhpcy5faXRlbXMgPSBpdGVtcztcclxuXHRcdHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcblx0XHR0aGlzLl9jb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJlcigpIHtcclxuXHRcdHRoaXMuX2l0ZW1zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuXHRcdFx0dGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0YWRkSXRlbShlbGVtZW50KSB7XHJcblx0XHR0aGlzLl9jb250YWluZXJFbGVtZW50LnByZXBlbmQoZWxlbWVudCk7XHJcblx0fVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl90aXRsZSIsInRpdGxlIiwiX2ltYWdlIiwidXJsIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwiX2VsZW1lbnQiLCJpbWFnZUVsZW1lbnQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0RWwiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl92YWxpZGF0ZUZvcm1GaWVsZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbiIsImRpc2FibGVkIiwic29tZSIsImZvckVhY2giLCJyZXNldFZhbGlkYXRpb24iLCJyZXNldCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImJ1dHRvblNlbGVjdG9yIiwiZSIsImtleSIsImNsb3NlIiwiX3BvcHVwU2VsZWN0b3IiLCJfYnV0dG9uU2VsZWN0b3IiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiZXZlbnQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfcG9wdXBXaXRoRm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJmb3JtU2V0dGluZ3MiLCJhZGRDYXJkTW9kYWwiLCJlZGl0UHJvZmlsZSIsImlucHV0TmFtZSIsImlucHV0RGVzY3JpcHRpb24iLCJhZGRJbnB1dE5hbWUiLCJhZGRJbnB1dERlc2NyaXB0aW9uIiwiZWRpdEJ1dHRvbiIsImJ1dHRvbkFkZCIsIm5ld1BvcHVwUGhvdG8iLCJhZGRGb3JtVmFsaWRhdG9yIiwicG9wdXBQcm9maWxlIiwicmVuZGVyQ2FyZCIsIml0ZW0iLCJjb250YWluZXIiLCJuZXdDYXJkIiwiYWRkSXRlbSIsInBob3Rvc1NlY3Rpb24iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlVGV4dCIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckpvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJjdXJyZW50VXNlckluZm8iLCJpbWFnZVBvcHVwIiwiX2NhcHRpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyRWxlbWVudCIsImVsZW1lbnQiLCJwcmVwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==